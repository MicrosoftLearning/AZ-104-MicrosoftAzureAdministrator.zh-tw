---
lab:
  title: 實驗室 03b：使用 ARM 範本管理 Azure 資源
  module: Administer Azure Resources
---

# 實驗 03b - 使用 ARM 範本管理 Azure 資源
# 學生實驗室手冊

## 實驗案例
現在您已探索與佈建資源相關聯的基本 Azure 管理功能，並使用 Azure 入口網站根據資源群組加以組織，接著您需要使用 Azure Resource Manager 範本來執行對等的工作。

**注意：** **[互動式實驗室模擬](https://mslabs.cloudguides.com/guides/AZ-104%20Exam%20Guide%20-%20Microsoft%20Azure%20Administrator%20Exercise%205)** (英文) 可供您以自己的步調完成此實驗室。 您可能會發現互動式模擬與託管實驗室之間稍有差異，但所示範的核心概念與想法均相同。 

## 目標

在此實驗中，您將會：

+ 工作 1：檢閱用於部署 Azure 受控磁碟的 ARM 範本
+ 工作 2：使用 ARM 範本建立 Azure 受控磁碟
+ 工作 3：檢閱受控磁碟的 ARM 範本型部署

## 預計時間：20 分鐘

## 架構圖

![image](../media/lab03b.png)

### 指示

## 練習 1

## 工作 1：檢閱用於部署 Azure 受控磁碟的 ARM 範本

1. 登入 [**Azure 入口網站**](http://portal.azure.com)。

1. 在 Azure 入口網站中，搜尋並選取 [資源群組]。 

1. 在資源群組清單中，按一下 [az104-03a-rg1]。

1. 在 [az104-03a-rg1] 資源群組刀鋒視窗的 [設定] 區段中，按一下 [部署]。

1. 在 [az104-03a-rg1 - 部署] 刀鋒視窗上，按一下部署清單中的第一個項目。

1. 在 **Microsoft.ManagedDisk-* XXXXXXXXX* \| 概觀** 刀鋒視窗上，按一下 [範本]。

    >**注意**：檢閱範本的內容，並注意您可以選擇將其 [下載] 到本機電腦、[新增至程式庫]，或再次 [部署]。

1. 按一下 [下載]，並將包含範本和參數檔案的壓縮檔儲存到實驗室電腦上的 [下載] 資料夾。

1. 在 **Microsoft.ManagedDisk-* XXXXXXXXX* \| 範本** 刀鋒視窗上，按一下 [輸入]。

1. 請注意 **location** 參數的值。 您將在下一個工作中需要它。

1. 將下載檔案的內容解壓縮到實驗室電腦上的 [下載] 資料夾。

    >**注意**：這些檔案也會以 **\\Allfiles\\Labs\\03\\az104-03b-md-template.json** 和 **\\Allfiles\\Labs\\03\\az104-03b-md-parameters.json** 的方式提供
    
1. 關閉所有 [檔案總管] 視窗。

## 工作 2：使用 ARM 範本建立 Azure 受控磁碟

1. 在 Azure 入口網站中，搜尋並選取 [部署自訂範本]。

1. 在 [自訂部署] 刀鋒視窗中按一下 [在編輯器中建置您自己的範本]。

1. 在 [編輯範本] 刀鋒視窗上，按一下 [載入檔案]，然後上傳您在上一個工作中下載的 **template.json** 檔案。

1. 在編輯器窗格中，移除下列幾行：

   ```json
   "sourceResourceId": {
       "type": "String"
   },
   ```

   ```json
   "hyperVGeneration": {
       "defaultValue": "V1",
       "type": "String"
   },      
   ```

    >**注意**：這些參數不適用於目前的部署，因此需要移除。 在這當中，sourceResourceId、sourceUri、osType 和 hyperVGeneration 參數適用於從現有的 VHD 檔案建立 Azure 磁碟。

1. **儲存**變更。

1. 返回 [自訂部署] 刀鋒視窗，然後按一下 [編輯參數]。  

1. 在 [編輯參數] 刀鋒視窗上，按一下 [載入檔案]，並上傳您在上一個工作中下載的 **parameters.json** 檔案，然後 [儲存] 變更。

1. 回到 [自訂部署] 刀鋒視窗，指定下列設定：

    | 設定 | 值 |
    | --- |--- |
    | 訂用帳戶 | *您在此實驗室中使用的 Azure 訂閱名稱* |
    | 資源群組 | **新**資源群組 **az104-03b-rg1** 的名稱 |
    | 區域 | 您在此實驗室中使用的訂用帳戶中，可用的任何 Azure 區域名稱 |
    | 磁碟名稱 | **az104-03b-disk1** |
    | 位置 | 您在上一個工作中所記錄的位置參數值 |
    | SKU | **Standard_LRS** |
    | 磁碟大小 (GB) | **32** |
    | 建立選項 | **empty** |
    | 磁碟加密集類型 | **EncryptionAtRestWithPlatformKey** |
    | 資料存取驗證模式 | 無 |
    | 網路存取原則 | **AllowAll** |
    | 公用網路存取 | 已停用 |

1. 選取 [檢閱 + 建立]，然後選取 [建立]。

1. 確認部署已成功完成。

## 工作 3：檢閱受控磁碟的 ARM 範本型部署

1. 在 Azure 入口網站中，搜尋並選取 [資源群組]。 

1. 在資源群組清單中，按一下 [az104-03b-rg1]。

1. 在 [az104-03b-rg1] 資源群組刀鋒視窗的 [設定] 區段中，按一下 [部署]。

1. 從 [az104-03b-rg1 - 部署] 刀鋒視窗中，按一下部署清單中的第一個項目，並檢閱 [輸入] 和 [範本] 刀鋒視窗的內容。

## 清除資源

   >**注意**：請勿刪除您在此實驗中部署的資源。 您將在本課程模組的下一個實驗中引用這些資源。

## 檢閱

在此實驗中，您已：

- 檢閱用於部署 Azure 受控磁碟的 ARM 範本
- 使用 ARM 範本建立 Azure 受控磁碟
- 檢閱受控磁碟的 ARM 範本型部署
