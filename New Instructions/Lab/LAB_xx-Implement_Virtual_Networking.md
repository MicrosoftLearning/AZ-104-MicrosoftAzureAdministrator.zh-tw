---
lab:
  title: 實驗室04：實作 虛擬網絡
  module: Administer Virtual Networking
---

# 實驗 04 - 實作虛擬網路

## 實驗需求

此實驗室需要 Azure 訂用帳戶。 您必須能夠建立虛擬網路和子網。 

## 估計時間：20 分鐘

## 實驗案例 

您的全域組織計劃實作虛擬網路。 這些網路位於美國東部、西歐和東南亞。 立即的目標是要容納所有現有的資源。 不過，組織處於成長階段，並想要確保有額外的成長容量。

**CoreServicesVnet** 虛擬網路會部署在**美國東部**區域。 此虛擬網路的資源數目最多。 網路可透過 VPN 連線連線至內部部署網路。 此網路具有 Web 服務、資料庫和其他系統，這些系統是業務營運的關鍵。 共用服務，例如域控制器和 DNS 位於這裡。 預期會有大量成長，因此此虛擬網路需要大型位址空間。

**ManufacturingVnet** 虛擬網路部署在**西歐**區域，靠近您組織的製造設施位置。 此虛擬網路包含製造設施作業的系統。 組織預期其系統需要大量的內部連線裝置來擷取數據，例如溫度，而且需要可擴充的IP位址空間。

**ResearchVnet** 虛擬網路部署於**東南亞**區域，靠近組織的研究及開發團隊所在的位置。 研究與開發團隊會使用此虛擬網路。 這個小組有一組小型、穩定，且預期不會成長的資源。 該團隊需要少量的 IP 位址以用於幾部工作時所需的虛擬機器。

## 互動式實驗室模擬

**[本主題提供互動式實驗室模擬](https://mslabs.cloudguides.com/guides/AZ-700%20Lab%20Simulation%20-%20Design%20and%20implement%20a%20virtual%20network%20in%20Azure)**。 模擬可讓您以自己的步調點選類似的案例。 互動式模擬與這個託管的實驗室之間有差異，但所示範的核心概念和想法都相同。 不需要 Azure 訂用帳戶。 
## 工作

+ 工作 1：建立資源群組。
+ 工作 2：建立 CoreServicesVnet 虛擬網路和子網路。
+ 工作 3：建立 ManufacturingVnet 虛擬網路和子網路。
+ 工作 4：建立 ResearchVnet 虛擬網路和子網路。
+ 工作 5：確認 VNet 和子網的建立。

## 架構圖
![網路配置](../media/az104-lab04-diagram.png)

| **虛擬網路** | **區域**   | **虛擬網路位址空間** | **子網路**                | **子網路**    |
| ------------------- | ------------ | --------------------------------- | ------------------------- | ------------- |
| CoreServicesVnet    | 美國東部      | 10.20.0.0/16                      |                           |               |
|                     |              |                                   | GatewaySubnet             | 10.20.0.0/27  |
|                     |              |                                   | SharedServicesSubnet      | 10.20.10.0/24 |
|                     |              |                                   | DatabaseSubnet            | 10.20.20.0/24 |
|                     |              |                                   | PublicWebServiceSubnet    | 10.20.30.0/24 |
| ManufacturingVnet   | 歐洲西部  | 10.30.0.0/16                      |                           |               |
|                     |              |                                   | ManufacturingSystemSubnet | 10.30.10.0/24 |
|                     |              |                                   | SensorSubnet1             | 10.30.20.0/24 |
|                     |              |                                   | SensorSubnet2             | 10.30.21.0/24 |
|                     |              |                                   | SensorSubnet3             | 10.30.22.0/24 |
| ResearchVnet        |東南亞| 10.40.0.0/16                      |                           |               |
|                     |              |                                   | ResearchSystemSubnet      | 10.40.0.0/24  |


這些虛擬網路和子網的結構化方式可容納現有的資源，但允許預測的成長。 讓我們建立這些虛擬網路與子網路，為我們的網路基礎結構奠定基礎。

>**您知道嗎？**：最好避免重疊的IP位址範圍，以減少問題並簡化疑難解答。 重迭是整個網路的問題，無論是雲端還是內部部署。 許多組織都會設計全企業IP尋址配置，以避免重疊並規劃未來成長。



## 工作 1：建立資源群組

### 為此實驗室中的所有資源建立資源群組。 

1. 登入 **Azure 入口網站** - `http://portal.azure.com`。

1. 搜尋並選取 **[資源群組**]，然後選取 [ **+ 建立**]。  

1. 使用這些設定建立資源群組。 

| **定位字元**         | **選項**                                 | **值**            |
| --------------- | ------------------------------------------ | -------------------- |
| 基本概念          | 資源群組                             | `az104-rg4` |
|                 | 區域                                     | （美國） **美國東部**     |
| 標籤            | 不需要任何變更                        |                      |
| 檢閱 + 建立 | 檢閱設定並選取 [建立]**** |                      |


1. 重新整理 [ **資源群組** ] 頁面，並確認 **az104-rg4** 出現在清單中。

## 工作 2：建立 CoreServicesVnet 虛擬網路和子網路

組織會規劃核心服務的大量成長。 在這項工作中，您會建立虛擬網路和相關聯的子網，以容納現有的資源和計劃成長。

1. 搜尋並選取 **[虛擬網絡**]。

    ![Azure 入口網站首頁虛擬網路的全域搜尋列結果。](../media/az104-lab04-vnet-search.png)

1. 在 [虛擬網路] 頁面上，選取 [建立]****。  

    ![建立虛擬網路精靈。](../media/az104-lab04-createvnet.png)

3. 使用下表中的資訊來建立 CoreServicesVnet 虛擬網路。  

| **定位字元**      | **選項**         | **值**            |
| ------------ | ------------------ | -------------------- |
| 基本概念       | 資源群組     | **az104-rg1** |
|              | 名稱               | `CoreServicesVnet`     |
|              | 區域             | （美國） **美國東部**         |
| IP 位址 | IPv4 位址空間 | `10.20.0.0/16`         |

    >**Note:** Remove or overwrite the default IP Address space.
    
![Azure 虛擬網路部署的IP位址組態](../media/az104-lab04-address-space.png)

 4. 建立 CoreServicesVnet 子網。 若要開始建立每個子網路，請選取 [+ 新增子網路]****。 若要完成建立每個子網路，請選取 [新增]****。

| **子網路**             | **選項**           | **值**              |
| ---------------------- | -------------------- | ---------------------- |
| GatewaySubnet          | 子網路名稱          | `GatewaySubnet`          |
|                        | 子網路位址範圍 | `10.20.0.0/27`           |
| SharedServicesSubnet   | 子網路名稱          | `SharedServicesSubnet`   |
|                        | 子網路位址範圍 | `10.20.10.0/24`          |
| DatabaseSubnet         | 子網路名稱          | `DatabaseSubnet`         |
|                        | 子網路位址範圍 | `10.20.20.0/24  `        |
| PublicWebServiceSubnet | 子網路名稱          | `PublicWebServiceSubnet` |
|                        | 子網路位址範圍 | `10.20.30.0/24`          |

 1. 若要完成建立 CoreServicesVnet 及其相關聯的子網路，請選取 [檢閱 + 建立]****。

 1. 確認您的設定已通過驗證，然後選取 [建立]****。
 
## 工作 3：建立 ManufacturingVnet 虛擬網路和子網路

在這項工作中，您會繼續建立額外的虛擬網路和相關聯的子網。 組織預期製造業辦公室的成長，因此子網的大小會隨著預期的成長而調整規模。

    >**Note**: If you need help, use the detailed steps in Task 2. 

| **定位字元**      | **選項**         | **值**             |
| ------------ | ------------------ | --------------------- |
| 基本概念       | 資源群組     | **az104-rg1**  |
|              | 名稱               | `ManufacturingVnet`     |
|              | 區域             | （歐洲） **西歐**  |
| IP 位址 | IPv4 位址空間 | `10.30.0.0/16`          |



| **子網路**                | **選項**           | **值**                 |
| ------------------------- | -------------------- | ------------------------- |
| ManufacturingSystemSubnet | 子網路名稱          | `ManufacturingSystemSubnet` |
|                           | 子網路位址範圍 | `10.30.10.0/24`             |
| SensorSubnet1             | 子網路名稱          | `SensorSubnet1`             |
|                           | 子網路位址範圍 | `10.30.20.0/24`             |
| SensorSubnet2             | 子網路名稱          | `SensorSubnet2`             |
|                           | 子網路位址範圍 | `10.30.21.0/24`             |
| SensorSubnet3             | 子網路名稱          | `SensorSubnet3`             |
|                           | 子網路位址範圍 | `10.30.22.0/24`             |
 

## 工作 4：建立 ResearchVnet 虛擬網路和子網路

在這項工作中，您會建立最終的虛擬網路和相關聯的子網。 該組織沒有計劃成長，對研發辦公室的需求有限。

>**注意**：如果您需要協助，請使用工作 2 中的詳細步驟。 

| **定位字元**      | **選項**         | **值**            |
| ------------ | ------------------ | -------------------- |
| 基本概念       | 資源群組     | **az104-rg1** |
|              | 名稱               | `ResearchVnet`         |
|              | 區域             | **東南亞**       |
| IP 位址 | IPv4 位址空間 | `10.40.0.0/16`         |

| **子網路**           | **選項**           | **值**            |
| -------------------- | -------------------- | -------------------- |
| ResearchSystemSubnet | 子網路名稱          | `ResearchSystemSubnet` |
|                      | 子網路位址範圍 | `10.40.0.0/24 `        |
 

## 工作 5：確認 VNet 和子網路的建立

在這項工作中，您會驗證您擁有符合組織需求所需的所有虛擬網路和子網。

1. 在 Azure 入口網站 首頁上，搜尋並選取 [**所有資源**]。

2. 確認已列出 CoreServicesVnet、ManufacturingVnet 和 ResearchVnet。

3. 選取 [CoreServicesVnet]****。 

4. 在 CoreServicesVnet 的 [設定]**** 底下，選取 [子網路]****。

5. 在 [CoreServicesVnet | 子網路] 中，確認已列出您建立的子網路，且 IP 位址範圍正確。

   ![CoreServicesVnet 中的子網路清單。](../media/az104-lab04-subnets.png)

6. 針對每個 VNet 重複步驟 3 - 5。 請記得變更虛擬網路選取專案，以確保您確認所有虛擬網路。

## 檢閱

恭喜！ 您已成功建立資源群組、三個虛擬網路和相關聯的子網。
