---
lab:
  title: 實驗室 09a：實作 Web Apps
  module: Administer PaaS Compute Options
---

# 實驗 09a - 實作 Web 應用程式


## 實驗室簡介

在此實驗室中，您將瞭解 Azure Web 應用程式。 您將瞭解如何設定 Web 應用程式，以在外部 GitHub 存放庫中顯示 Hello World 應用程式。 您將瞭解如何建立預備位置，並與生產位置交換。 您也會瞭解自動調整以因應需求變更。

此實驗室需要 Azure 訂用帳戶。 您的訂用帳戶類型可能會影響此實驗室中功能的可用性。 您可以變更區域，但步驟是使用美國東部撰寫。

## 預估時間：30 分鐘

## 實驗案例

貴組織對 Azure Web 應用程式感興趣，可裝載貴組織的網站。 網站目前裝載于公司內部部署資料中心。 該網站使用 PHP 執行階段堆疊在 Windows 伺服器上執行。 硬體即將結束生命週期，很快就會需要更換。 您的組織想要完成測試，以協助在生命循環結束日期之前移至 Azure。

## 互動式實驗室模擬

您可能會發現互動式實驗室模擬對本主題很有用。 模擬可讓您以自己的步調點選類似的案例。 互動式模擬和此實驗室之間有差異，但許多核心概念都相同。 不需要 Azure 訂用帳戶。

+ [建立 Web 應用程式 ](https://mslearn.cloudguides.com/en-us/guides/AZ-900%20Exam%20Guide%20-%20Azure%20Fundamentals%20Exercise%202) 。 建立執行 Docker 容器的 Web 應用程式。
    
+ [實作 Azure Web 應用程式 ](https://mslabs.cloudguides.com/guides/AZ-104%20Exam%20Guide%20-%20Microsoft%20Azure%20Administrator%20Exercise%2013) 。 建立 Azure Web 應用程式、管理部署及調整應用程式。 

## 架構圖

![工作的圖表。](../media/az104-lab09a-architecture-diagram.png)

## 工作

+ 工作 1：建立 Azure Web 應用程式
+ 工作 2：建立預備部署位置
+ 工作 3：設定 Web 應用程式部署設定
+ 工作 4：交換預備位置
+ 工作 5：設定及測試 Azure Web 應用程式的自動調整

## 工作 1：建立 Azure Web 應用程式

在這個工作中，您將建立一個 Azure Web 應用程式。 Azure 提供Azure App 服務，這是 Web、行動和其他 Web 應用程式的平臺即服務 （PAAS） 解決方案。 Azure Web Apps 是一種Azure App 服務供應專案，可用於執行大部分執行時間環境的網站，例如 PHP、JAVA、.NET 等等。 如果您需要多個執行時間環境的支援，您可以使用 App Services 搭配 Docker 容器。 您選取的 SKU 會決定您透過 Web 應用程式收到的計算、儲存體和功能數量。

1. 登入 **Azure 入口網站** - `https://portal.azure.com`。

1. 搜尋並選取 `App services`。

1. **從下拉式功能表 ** [Web 應用程式 ** ] 中選取 [+ 建立 ** ]。 請注意其他選項。 

1. 在 [建立 Web 應用程式] 刀鋒視窗的 [基本] 索引標籤上，指定下列設定 (其他設定請保留預設值)：

    | 設定 | 值 |
    | --- | ---|
    | 訂用帳戶 | 您要在此實驗室中使用的 Azure 訂用帳戶名稱 |
    | 資源群組 | `az104-rg9`（如有必要，請選取 **** 新建） |
    | Web 應用程式名稱 | 任何全域唯一名稱 |
    | 發佈 | **程式碼** |
    | 執行階段堆疊 | **PHP 8.2** |
    | 作業系統 | **Linux** |
    | 區域 | **美國東部** |
    | 定價方案 | 接受預設值 |
    | 區域備援 | 接受預設值 |

 1. 按一下 [ ** 檢閱 + 建立 ** ]，然後按一下 [ ** 建立 ** ]。

    >**注意**：請等到建立 Web 應用程式，再繼續進行下一個工作。 這應該大約需要 1 分鐘的時間。

1. 在 [部署] 刀鋒視窗上，按一下 [移至資源]。

## 工作 2：建立預備部署位置

在此工作中，您將建立預備部署位置。 部署位置是特定 App Service 方案的功能，可讓您先執行測試，再讓應用程式可供公眾使用（或終端使用者）。 執行測試之後，您可以將位置從開發或預備交換至生產環境。 許多組織會使用位置來執行生產前測試。 此外，許多組織會針對每個應用程式執行多個位置（例如開發、QA、測試和生產環境）。

1. 在新部署 Web 應用程式的刀鋒視窗上，按一下 ** [預設網域 ** ] 連結，在新的瀏覽器索引標籤中顯示預設網頁。

1. 關閉新的瀏覽器索引標籤，然後回到 [Azure 入口網站]，在 [Web 應用程式] 刀鋒視窗的 [部署] 區段中，按一下 [部署位置]。

    >**注意**：Web 應用程式此時具有標示為 **PRODUCTION** 的單一部署位置。

1. 按一下 [+ 新增位置]，並使用下列設定新增位置：

    | 設定 | 值 |
    | --- | ---|
    | 名稱 | `staging` |
    | 從下列複製設定 | **不要複製設定**|

1. 選取**新增**。

1. 回到 Web 應用程式的 [部署位置] 刀鋒視窗上，按一下代表新建立暫存位置的專案。

    >**注意**：這將開啟顯示預備位置屬性的刀鋒視窗。

1. 檢閱預備位置刀鋒視窗，並注意其 URL 與指派給生產位置的 URL 不同。

## 工作 3：設定 Web 應用程式部署設定

在這項工作中，您將設定 Web 應用程式部署設定。 您可以使用部署設定來設定應用程式服務，以允許從您選擇的存放庫持續部署，或使用 FTPS 認證和其他自動化。 這可確保 App Service 具有執行中應用程式的最新版本。

1. 在 [預備部署位置] 刀鋒視窗的 ** [設定 ** ] 區段中，選取 ** [組態 ** ]，然後選取 [ ** 一般設定 ** ]。

    >**注意： ** 請確定您位於預備位置刀鋒視窗上（而不是生產位置）。
    
1. 在 ** [設定] ** 索引標籤的 ** [來源 ** ] 下拉式清單中，選取 ** [外部 Git ** ]。

1. 在 [存放庫] 欄位中，輸入 `https://github.com/Azure-Samples/php-docs-hello-world`

1. 在分支欄位中，輸入 `master` 。

1. 選取 [儲存]。

1. 從預備位置選取 [ ** 概觀 ** ]。

1. 選取 [ ** 預設網域 ** ] 連結，然後在新的索引標籤中開啟 URL。 

1. 確認預備位置顯示 ** Hello World ** 。

## 工作 4：交換預備位置

在這項工作中，您會將預備位置與生產位置交換。 交換位置可讓您使用已在預備位置中測試的程式碼，並將它移至生產環境。 如果您需要移動已針對位置自訂的其他應用程式設定，Azure 入口網站也會提示您。 交換位置是應用程式小組和應用程式支援小組的常見工作，尤其是部署例行應用程式更新和錯誤修正的工作。

1. 瀏覽回到顯示 Web 應用程式生產位置的窗格。

1. 在 [部署] 區段中，按一下 [部署位置]，然後按一下 [交換] 工具列圖示。

1. 在 [交換] 窗格檢閱預設設定，然後按一下 [交換]。

1. **按一下 ** Web 應用程式生產位置刀鋒視窗上的 [概觀]，然後按一下 ** [預設網域 ** ] 連結，在新的瀏覽器索引標籤中顯示網站首頁。

    >**注意： ** 複製您在下一個工作中進行負載測試所需的預設網域 ** URL ** 。 

1. 確認預設網頁已取代為 **Hello World！** 頁面。

## 工作 5：設定及測試 Azure Web 應用程式的自動調整

在這項工作中，您將設定 Azure Web 應用程式的自動調整。 自動調整可讓您在 Web 應用程式流量增加時維持 Web 應用程式的最佳效能。  對於大部分的應用程式，您可能會知道應用程式中應該要調整的特定計量。 這可能是 CPU 使用量、記憶體或頻寬。

1. 在顯示 Web 應用程式生產位置的刀鋒視窗中，按一下 [設定] 區段中的 [向外延展 (App Service方案)]。

1. 從 [ ** 調整] ** 區段中，選取 [ ** 自動 ** ]。

1. 在 [ ** 最大高載 ** ] 欄位中，選取 ** [2 ** ]。

    ![自動調整頁面的螢幕擷取畫面。](../media/az104-lab09a-autoscale.png)

1. 選取 [儲存]。

    >**注意 ** ：在生產環境中，組織通常會選取 [ ** 規則型 ** ]，並針對觸發自動調整的特定計量或 Application Insights 元件設定規則。

1. 在顯示 Web 應用程式生產位置的刀鋒視窗上，選取 [ ** 診斷並解決問題 ** ]。

1. 在 [ ** 負載測試您的應用程式 ** ] 方塊中，選取 [ ** 建立負載測試 ** ]。

    + 選取 ** [+ 建立 ** ]，並為您的負載測試命名 ** ** 。  名稱必須是唯一的。
    + 選取 [檢閱 + 建立]****，然後選取 [建立]****。

1. 等候負載測試建立，然後選取 ** [移至資源 ** ]。

1. 從 [概觀 **  |  ** ] [ ** 新增 HTTP 要求 ** ]，選取 [ ** 建立]。 **

1. 針對 [ ** 測試 URL ** ]，貼上您的 ** 預設網域 ** URL。 請確定此格式正確，且開頭 ** 為 HTTPs:// ** 。

1. 選取 [檢閱 + 建立]****，然後選取 [建立]****。

    >**注意： ** 建立測試可能需要幾分鐘的時間。 

1. 檢閱測試結果，包括 ** 虛擬使用者 ** 、 ** 回應時間 ** 和 ** 要求/秒 ** 。

1. 選取 [ ** 停止 ** ] 以完成測試回合。
   
## 重要心得

恭喜您完成實驗室。 以下是此實驗室的主要外賣。 

+ Azure App 服務可讓您快速建置、部署及調整 Web 應用程式。
+ App Service 包含許多開發人員環境的支援，包括 ASP.NET、JAVA、PHP 和 Python。
+ 部署位置可讓您建立不同的環境，以部署及測試 Web 應用程式。
+ 您可以手動或自動調整 Web 應用程式以處理其他需求。 

## 清除您的資源

如果您使用自己的訂用帳戶，需要一分鐘的時間才能刪除實驗室資源。 這可確保資源可以釋出，並將成本降到最低。 刪除實驗室資源最簡單的方式是刪除實驗室資源群組。 

+ 在Azure 入口網站中，選取資源群組、選取 ** [刪除資源群組 ** ]、 ** 輸入資源組名 ** ，然後按一下 [ ** 刪除 ** ]。

+ 使用 Azure PowerShell， `Remove-AzResourceGroup -Name resourceGroupName` 。

+ 使用 CLI， `az group delete --name resourceGroupName` 。
    
